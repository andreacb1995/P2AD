package modelo.modelo.facade;

import java.io.File;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;

import controlador.ModulosController;
import modelo.modelo.vo.AlumnoVO;


public class AlumnoFacade {
	private static ArrayList<AlumnoVO> listaAlumnos;
	
public AlumnoFacade() {
		
	}

public static void nuevoAlumno() {
	
	try {
		AlumnoVO alu=new AlumnoVO();
		alu.setDni("");
		alu.setNombre("");
		alu.setApellido1("");
		alu.setApellido2("");
		alu.setTelefono(000000000);
		
		listaAlumnos.add(alu);
		
		AlumnosVO alumnos=new AlumnosVO();
		alumnos.setAlumno(listaAlumnos);
		
		JAXBContext ctx=JAXBContext.newInstance(AlumnoVO.class);
		Marshaller ms=ctx.createMarshaller();
		ms.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
		ms.marshal(alumnos, new File("src\\Ej2_AD_Alumno.xml"));
		
	} catch(JAXBException ex) {
		Logger.getLogger(ModulosController.class.getName()).log(Level.SEVERE,null,ex);
	}	
}

public static void listarAlumno() {
	
	try {
		JAXBContext ctx=JAXBContext.newInstance(AlumnoVO.class);
		Unmarshaller ums=ctx.createUnmarshaller();
		AlumnosVO alumnos=(AlumnosVO)ums.unmarshal(new File("src\\Ej2_AD_Alumno.xml"));
				
		for(AlumnoVO al : alumnos.getAlumno()) {
			System.out.println(al.getDni()+"\n"+al.getNombre()+"\n"+al.getApellido1()+"\n"+
					al.getApellido2()+"\n"+al.getTelefono());
		}
		
	} catch(JAXBException ex2) {
		Logger.getLogger(ModulosController.class.getName()).log(Level.SEVERE,null,ex2);
	}	
}

public static void actualizarAlumno(String dni) {
	
	try {
		String ElementoSeleccionado=dni;
		AlumnoVO al=new AlumnoVO();
		for(int i=0;i<listaAlumnos.size();i++) {
			if(listaAlumnos.get(i).getDni()==ElementoSeleccionado) {
				listaAlumnos.set(i,al);
			}
		}
		
		AlumnosVO alumnos=new AlumnosVO();
		alumnos.setAlumno(listaAlumnos);
		
		JAXBContext ctx=JAXBContext.newInstance(AlumnoVO.class);
		Marshaller ms=ctx.createMarshaller();
		ms.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
		ms.marshal(alumnos, new File("src\\Ej2_AD_Alumno.xml"));
		
	} catch(JAXBException ex) {
		Logger.getLogger(ModulosController.class.getName()).log(Level.SEVERE,null,ex);
	}	
}

public static void eliminarAlumno(String dni) {
	
	try {
		String ElementoSeleccionado=dni;
		for(int i=0;i<listaAlumnos.size();i++) {
			if(listaAlumnos.get(i).getDni()==ElementoSeleccionado) {
				listaAlumnos.remove(i);
			}
		}
		
		AlumnosVO alumnos=new AlumnosVO();
		alumnos.setAlumno(listaAlumnos);
		
		JAXBContext ctx=JAXBContext.newInstance(AlumnoVO.class);
		Marshaller ms=ctx.createMarshaller();
		ms.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
		ms.marshal(alumnos, new File("src\\Ej2_AD_Alumno.xml"));
		
	} catch(JAXBException ex) {
		Logger.getLogger(ModulosController.class.getName()).log(Level.SEVERE,null,ex);
	}	
}
}

}
